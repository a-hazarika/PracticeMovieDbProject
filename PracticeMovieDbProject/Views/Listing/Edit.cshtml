@model EditMovieViewModel
@{
    ViewBag.Title = "Edit Movie - " + Model.Movie.Name;

    var moviePoster = "/images/posters/No_Image_Available.gif";
    if (!string.IsNullOrWhiteSpace(Model.Movie.PosterUrl))
    {
        moviePoster = "/images/" + Model.Movie.PosterUrl;
    }
}
@section Scripts
    {
    <script src="@Url.Content("~/js/addNewPerson.js")"></script>
}

<h3 class="text-muted">Edit <strong>@Model.Movie.Name</strong></h3>

<div class="row">
    <form>
        <div class="col-sm-2 col-xs-12" style="border:2px solid red">
            <img src="@moviePoster" alt="@Model.Movie.Name" style="padding-top:10px; width:100%; min-width:100px;">
            <label class="btn btn-sm btn-info" style="width:100%; min-width:100px;">
                Change <input type="file" style="display:none;">
            </label>
            <label class="label-warning small" style="width:100%; min-width:100px;">
                Only .jpg/.png files allowed.
            </label>
        </div>
        <div class="col-sm-10 col-xs-12" style="border:2px solid red">
            <div class="row">
                <div class="col-sm-10 col-xs-12">
                    <label>Title:</label><input type="text" class="form-control" name="name" value="@Model.Movie.Name">
                </div>
                <div class="col-sm-2">
                    <label>Year:</label><input type="number" class="form-control" name="year" value="@Model.Movie.ReleaseYear">
                </div>
            </div>
            <div class="row topMarginOnly">
                <div class="col-xs-12">
                    <label>Plot:</label>
                    <textarea class="form-control" name="plot" style="height:150px">@Model.Movie.Plot</textarea>
                </div>
            </div>


            <div class="row topMarginOnly">
                <div class="col-sm-12 col-xs-12">
                    <label for="producer">Producer (select one):</label>
                    <strong><span class="text-info" id="producerAddedMsg"></span></strong>
                </div>

                <div class="col-sm-10 col-xs-12">
                    <select class="btn btn-primary" id="producer" name="producer">
                        @foreach (var producer in Model.Producers)
                        {
                            if (producer.Id == Model.Movie.Producer.Id)
                            {
                                <option selected="selected">@producer.FullName</option>
                            }
                            else
                            {
                                <option>@producer.FullName</option>
                            }
                        }
                    </select>
                    <button type="button" class="btn-xs btn-info" id="newProducerBtn" onclick="showAddProducerDiv()">Add New</button>
                </div>
            </div>


            @*Add partial view to add new producers*@
            <div id="addProducerDiv" class="row">
                <div class="col-sm-12 padded roundedRedBorderBox background-antiquewhite">
                    @await Html.PartialAsync("_AddProducer", Model.PersonViewModel)
                </div>
            </div>

            <div class="row topMarginOnly">
                <div class="col-sm-12 col-xs-12">
                    <label>Actors:</label>
                    <strong><span class="text-info" id="actorAddedMsg"></span></strong>
                </div>

                <div class="col-sm-12 col-xs-12">
                    <button class="btn btn-primary btn-sm dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown">
                        Select Actors &nbsp;&nbsp;&nbsp;&nbsp;<img width="10" src="~/images/icons/angle-down-solid.svg" />
                    </button>
                    <ul class="dropdown-menu">
                        @foreach (var actor in Model.Actors)
                        {
                            <li class="btn-primary border-thin-white" style="padding:2px 3px;">
                                <label>
                                    <input class="checkboxCustom" type="checkbox" value="@actor.Id" name="actorId" />
                                    <span class="listText">@actor.FullName</span>
                                </label>
                            </li>
                        }
                    </ul>
                    <button class="btn-xs btn-info" type="button" id="addActorBtn" onclick="showNewActorDiv()">Add New</button>
                </div>

            </div>

            @*Add partial view to add new actors*@
            <div id="addActorDiv" class="row">
                <div class="col-sm-12 padded roundedRedBorderBox background-antiquewhite">
                    @await Html.PartialAsync("_AddActor", Model.PersonViewModel)
                </div>
            </div>

        </div>

        <div class="text-right" style="border:2px solid green;">
            <input class="btn-sm btn-primary" type="submit" style="width:100px;margin-top:10px;" />
        </div>
    </form>
</div>